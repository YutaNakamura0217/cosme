# APIエンドポイント

作成者: 中村雄大
作成日時: 2025年2月26日 17:53

# Beauty Genius APIエンドポイント設計書

フロントエンド要件のフォルダ構成を参考に、BeautyGeniusアプリケーションに必要なAPIエンドポイントを設計しました。以下に主要なエンドポイントとサンプルJSONレスポンスを示します。

## 1. 認証系API

### 1.1 ユーザー登録

- **エンドポイント**: `POST /api/v1/auth/register`
- **リクエスト**:

```json
{
  "email": "user@example.com",
  "password": "SecurePassword123",
  "firstName": "山田",
  "lastName": "花子",
  "birthdate": "1990-01-01"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "message": "ユーザー登録が完了しました。メールアドレスを確認してください。",
  "data": {
    "userId": "u-12345abcde",
    "email": "user@example.com",
    "emailVerified": false
  }
}

```

### 1.2 ログイン

- **エンドポイント**: `POST /api/v1/auth/login`
- **リクエスト**:

```json
{
  "email": "user@example.com",
  "password": "SecurePassword123"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expiresIn": 3600,
    "user": {
      "userId": "u-12345abcde",
      "firstName": "山田",
      "lastName": "花子",
      "email": "user@example.com",
      "profileImage": "<https://storage.beautygenius.com/profiles/default.jpg>",
      "subscription": {
        "plan": "free",
        "expiresAt": null
      }
    }
  }
}

```

### 1.3 トークン更新

- **エンドポイント**: `POST /api/v1/auth/refresh`
- **リクエスト**:

```json
{
  "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "expiresIn": 3600
  }
}

```

### 1.4 SNS認証

- **エンドポイント**: `POST /api/v1/auth/social`
- **リクエスト**:

```json
{
  "provider": "google",
  "token": "ya29.a0AfB_byBk..."
}

```

- **レスポンス**: (ログインAPIと同様)

### 1.5 パスワードリセット（リクエスト）

- **エンドポイント**: `POST /api/v1/auth/reset-password/request`
- **リクエスト**:

```json
{
  "email": "user@example.com"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "message": "パスワードリセット手順をメールで送信しました"
}

```

### 1.6 パスワードリセット（実行）

- **エンドポイント**: `POST /api/v1/auth/reset-password/confirm`
- **リクエスト**:

```json
{
  "token": "abc123def456",
  "newPassword": "NewSecurePassword123"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "message": "パスワードがリセットされました"
}

```

## 2. ユーザー管理API

### 2.1 プロフィール取得

- **エンドポイント**: `GET /api/v1/users/profile`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "userId": "u-12345abcde",
    "firstName": "山田",
    "lastName": "花子",
    "email": "user@example.com",
    "phoneNumber": "090-1234-5678",
    "birthdate": "1990-01-01",
    "profileImage": "<https://storage.beautygenius.com/profiles/u-12345abcde.jpg>",
    "createdAt": "2024-01-15T08:30:00Z",
    "skinProfile": {
      "skinType": "combination",
      "concerns": ["dryness", "acne"],
      "sensitivity": "medium",
      "lastAnalyzedAt": "2024-01-20T15:45:00Z"
    },
    "preferences": {
      "makeupStyle": ["natural", "elegant"],
      "favoriteColors": ["pink", "coral", "nude"],
      "preferredBrands": ["SHISEIDO", "SUQQU", "Dior"]
    }
  }
}

```

### 2.2 プロフィール更新

- **エンドポイント**: `PATCH /api/v1/users/profile`
- **リクエスト**:

```json
{
  "firstName": "山田",
  "lastName": "優子",
  "phoneNumber": "090-9876-5432"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "message": "プロフィールが更新されました",
  "data": {
    "userId": "u-12345abcde",
    "firstName": "山田",
    "lastName": "優子",
    "phoneNumber": "090-9876-5432",
    "updatedAt": "2024-02-10T09:15:30Z"
  }
}

```

### 2.3 プロフィール画像アップロード

- **エンドポイント**: `POST /api/v1/users/profile/image`
- **リクエスト**: マルチパートフォームデータ（画像ファイル）
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "profileImage": "<https://storage.beautygenius.com/profiles/u-12345abcde.jpg>",
    "updatedAt": "2024-02-10T09:20:15Z"
  }
}

```

### 2.4 ユーザー設定取得

- **エンドポイント**: `GET /api/v1/users/preferences`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "notifications": {
      "email": true,
      "push": true,
      "sms": false
    },
    "privacy": {
      "profileVisibility": "public",
      "showActivity": true,
      "allowRecommendations": true
    },
    "appearance": {
      "theme": "light",
      "language": "ja"
    },
    "contentPreferences": {
      "makeupStyle": ["natural", "elegant"],
      "favoriteColors": ["pink", "coral", "nude"],
      "preferredBrands": ["SHISEIDO", "SUQQU", "Dior"]
    }
  }
}

```

### 2.5 ユーザー設定更新

- **エンドポイント**: `PATCH /api/v1/users/preferences`
- **リクエスト**:

```json
{
  "notifications": {
    "push": false
  },
  "contentPreferences": {
    "makeupStyle": ["natural", "elegant", "dramatic"]
  }
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "message": "設定が更新されました"
}

```

### 2.6 ユーザー肌分析データ取得

- **エンドポイント**: `GET /api/v1/users/skin-analysis`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "skinType": "combination",
    "tone": "medium",
    "undertone": "neutral",
    "concerns": ["dryness", "acne"],
    "sensitivity": "medium",
    "analyses": [
      {
        "id": "sa-78901",
        "date": "2024-01-20T15:45:00Z",
        "imageUrl": "<https://storage.beautygenius.com/skin-analysis/u-12345abcde/20240120.jpg>",
        "metrics": {
          "moisture": 65,
          "wrinkles": 12,
          "evenness": 78,
          "pores": 35,
          "redness": 22
        },
        "recommendations": [
          {
            "concern": "moisture",
            "advice": "保湿成分の高い製品を使用してください",
            "recommendedProducts": ["p-10001", "p-10002"]
          }
        ]
      }
    ]
  }
}

```

## 3. サブスクリプション管理API

### 3.1 サブスクリプションプラン一覧

- **エンドポイント**: `GET /api/v1/subscription/plans`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "plans": [
      {
        "id": "free",
        "name": "無料プラン",
        "price": 0,
        "currency": "JPY",
        "billingCycle": null,
        "features": [
          "基本肌分析（月1回）",
          "基本的なメイクアドバイス",
          "広告あり"
        ],
        "limitations": {
          "virtualMakeupPerMonth": 5,
          "aiAdvisorQuestionsPerDay": 3
        }
      },
      {
        "id": "premium",
        "name": "プレミアムプラン",
        "price": 1200,
        "currency": "JPY",
        "billingCycle": "monthly",
        "features": [
          "詳細肌分析（無制限）",
          "高度なメイクアドバイス",
          "広告なし",
          "優先サポート"
        ],
        "limitations": {
          "virtualMakeupPerMonth": 100,
          "aiAdvisorQuestionsPerDay": 20
        }
      },
      {
        "id": "professional",
        "name": "プロフェッショナルプラン",
        "price": 2980,
        "currency": "JPY",
        "billingCycle": "monthly",
        "features": [
          "全ての機能無制限",
          "専門家による月1回のコンサルテーション",
          "製品サンプル配送（月1回）"
        ],
        "limitations": null
      }
    ]
  }
}

```

### 3.2 現在のサブスクリプション取得

- **エンドポイント**: `GET /api/v1/subscription/current`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "subscriptionId": "sub-56789",
    "planId": "premium",
    "planName": "プレミアムプラン",
    "status": "active",
    "currentPeriod": {
      "startDate": "2024-01-01T00:00:00Z",
      "endDate": "2024-01-31T23:59:59Z"
    },
    "autoRenew": true,
    "paymentMethod": {
      "type": "credit_card",
      "last4": "4242",
      "brand": "Visa",
      "expiryMonth": 12,
      "expiryYear": 2025
    },
    "usage": {
      "virtualMakeupThisMonth": 34,
      "virtualMakeupLimit": 100,
      "aiAdvisorToday": 5,
      "aiAdvisorLimit": 20
    }
  }
}

```

### 3.3 サブスクリプション購入/変更

- **エンドポイント**: `POST /api/v1/subscription/subscribe`
- **リクエスト**:

```json
{
  "planId": "premium",
  "paymentMethodId": "pm-98765",
  "couponCode": "WELCOME20"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "message": "サブスクリプションが開始されました",
  "data": {
    "subscriptionId": "sub-56789",
    "planId": "premium",
    "planName": "プレミアムプラン",
    "status": "active",
    "currentPeriod": {
      "startDate": "2024-02-26T00:00:00Z",
      "endDate": "2024-03-25T23:59:59Z"
    },
    "autoRenew": true,
    "nextBillingDate": "2024-03-26T00:00:00Z",
    "amountPaid": {
      "base": 1200,
      "discount": 240,
      "final": 960,
      "currency": "JPY"
    }
  }
}

```

### 3.4 サブスクリプション解約

- **エンドポイント**: `POST /api/v1/subscription/cancel`
- **リクエスト**:

```json
{
  "reason": "cost",
  "feedback": "料金が高すぎると感じました"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "message": "サブスクリプションは現在の期間終了後に解約されます",
  "data": {
    "subscriptionId": "sub-56789",
    "planId": "premium",
    "endDate": "2024-03-25T23:59:59Z",
    "autoRenew": false
  }
}

```

## 4. 仮想メイク機能API

### 4.1 画像アップロード

- **エンドポイント**: `POST /api/v1/virtual-makeup/upload`
- **リクエスト**: マルチパートフォームデータ（画像ファイル）
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "imageId": "img-abcde12345",
    "imageUrl": "<https://storage.beautygenius.com/user-uploads/u-12345abcde/img-abcde12345.jpg>",
    "facialFeatures": {
      "faceShape": "oval",
      "eyeShape": "almond",
      "lipShape": "full",
      "faceDetected": true,
      "landmarks": {
        "eyes": [[125, 90], [195, 90]],
        "nose": [160, 120],
        "lips": [[140, 160], [180, 160]]
      }
    }
  }
}

```

### 4.2 メイク適用

- **エンドポイント**: `POST /api/v1/virtual-makeup/apply`
- **リクエスト**:

```json
{
  "imageId": "img-abcde12345",
  "makeupItems": [
    {
      "type": "foundation",
      "productId": "p-10005",
      "color": "#F5D3C2",
      "intensity": 0.7
    },
    {
      "type": "eyeshadow",
      "productId": "p-10023",
      "color": "#A67F98",
      "intensity": 0.8,
      "style": "smoky"
    },
    {
      "type": "lipstick",
      "productId": "p-10042",
      "color": "#B93B45",
      "intensity": 0.9,
      "finish": "matte"
    }
  ]
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "resultId": "vmr-54321",
    "originalImageUrl": "<https://storage.beautygenius.com/user-uploads/u-12345abcde/img-abcde12345.jpg>",
    "resultImageUrl": "<https://storage.beautygenius.com/virtual-makeup/u-12345abcde/vmr-54321.jpg>",
    "appliedItems": [
      {
        "type": "foundation",
        "productId": "p-10005",
        "productName": "Luminous Silk Foundation",
        "brand": "GIORGIO ARMANI",
        "color": "#F5D3C2",
        "colorName": "4.0 Light Peach"
      },
      {
        "type": "eyeshadow",
        "productId": "p-10023",
        "productName": "Quad Eyeshadow Palette",
        "brand": "SUQQU",
        "color": "#A67F98",
        "colorName": "Akanesasu"
      },
      {
        "type": "lipstick",
        "productId": "p-10042",
        "productName": "Rouge Allure Velvet",
        "brand": "CHANEL",
        "color": "#B93B45",
        "colorName": "Rouge Vie"
      }
    ],
    "processingTime": 2.1
  }
}

```

### 4.3 メイク結果保存

- **エンドポイント**: `POST /api/v1/virtual-makeup/save`
- **リクエスト**:

```json
{
  "resultId": "vmr-54321",
  "title": "春のパーティーメイク",
  "description": "柔らかいピンクメイクで春の雰囲気を演出",
  "tags": ["春", "パーティー", "ピンク", "エレガント"]
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "lookId": "look-67890",
    "title": "春のパーティーメイク",
    "resultImageUrl": "<https://storage.beautygenius.com/virtual-makeup/u-12345abcde/vmr-54321.jpg>",
    "savedAt": "2024-02-26T14:25:30Z"
  }
}

```

### 4.4 保存済みメイク一覧取得

- **エンドポイント**: `GET /api/v1/virtual-makeup/saved`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "looks": [
      {
        "lookId": "look-67890",
        "title": "春のパーティーメイク",
        "imageUrl": "<https://storage.beautygenius.com/virtual-makeup/u-12345abcde/vmr-54321.jpg>",
        "createdAt": "2024-02-26T14:25:30Z",
        "tags": ["春", "パーティー", "ピンク", "エレガント"]
      },
      {
        "lookId": "look-67891",
        "title": "オフィスメイク",
        "imageUrl": "<https://storage.beautygenius.com/virtual-makeup/u-12345abcde/vmr-54322.jpg>",
        "createdAt": "2024-02-20T09:15:10Z",
        "tags": ["オフィス", "ナチュラル", "ベージュ"]
      }
    ],
    "pagination": {
      "total": 12,
      "page": 1,
      "perPage": 10,
      "hasMore": true
    }
  }
}

```

### 4.5 メイク結果詳細取得

- **エンドポイント**: `GET /api/v1/virtual-makeup/look/{lookId}`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "lookId": "look-67890",
    "title": "春のパーティーメイク",
    "description": "柔らかいピンクメイクで春の雰囲気を演出",
    "imageUrl": "<https://storage.beautygenius.com/virtual-makeup/u-12345abcde/vmr-54321.jpg>",
    "originalImageUrl": "<https://storage.beautygenius.com/user-uploads/u-12345abcde/img-abcde12345.jpg>",
    "createdAt": "2024-02-26T14:25:30Z",
    "tags": ["春", "パーティー", "ピンク", "エレガント"],
    "appliedItems": [
      {
        "type": "foundation",
        "productId": "p-10005",
        "productName": "Luminous Silk Foundation",
        "brand": "GIORGIO ARMANI",
        "color": "#F5D3C2",
        "colorName": "4.0 Light Peach",
        "price": 7150,
        "currency": "JPY",
        "purchaseUrl": "<https://beautygenius.com/redirect/product/p-10005>"
      },
      {
        "type": "eyeshadow",
        "productId": "p-10023",
        "productName": "Quad Eyeshadow Palette",
        "brand": "SUQQU",
        "color": "#A67F98",
        "colorName": "Akanesasu",
        "price": 8800,
        "currency": "JPY",
        "purchaseUrl": "<https://beautygenius.com/redirect/product/p-10023>"
      },
      {
        "type": "lipstick",
        "productId": "p-10042",
        "productName": "Rouge Allure Velvet",
        "brand": "CHANEL",
        "color": "#B93B45",
        "colorName": "Rouge Vie",
        "price": 4950,
        "currency": "JPY",
        "purchaseUrl": "<https://beautygenius.com/redirect/product/p-10042>"
      }
    ],
    "shareableUrl": "<https://beautygenius.com/s/look-67890>"
  }
}

```

## 5. AIアドバイザーAPI

### 5.1 テキストチャット

- **エンドポイント**: `POST /api/v1/advisor/chat`
- **リクエスト**:

```json
{
  "message": "春のお出かけに似合うリップカラーを教えて",
  "context": {
    "skinTone": "medium",
    "undertone": "warm",
    "recentInteractions": ["face-analysis", "foundation-recommendation"]
  }
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "conversationId": "conv-12345",
    "messageId": "msg-98765",
    "response": "春のお出かけには、明るく華やかな印象を与えるコーラルピンクやピーチカラーのリップがおすすめです。あなたのミディアムトーンの肌とウォームアンダートーンには、オレンジがかったコーラルカラーが特に美しく映えるでしょう。\\n\\n以下のような製品がおすすめです：\\n\\n1. シャネル ルージュ ココ フラッシュ「54 ボワイヤント」\\n2. ディオール アディクト リップ グロウ「コーラル」\\n3. SUQQU モイスチャー リッチ リップスティック「05 蜜柑橙」",
    "productRecommendations": [
      {
        "productId": "p-10046",
        "name": "ルージュ ココ フラッシュ",
        "brand": "CHANEL",
        "color": "#FF6A5E",
        "colorName": "54 ボワイヤント",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10046.jpg>",
        "price": 4620,
        "currency": "JPY",
        "relevanceScore": 0.95
      },
      {
        "productId": "p-10047",
        "name": "アディクト リップ グロウ",
        "brand": "Dior",
        "color": "#FF7D6D",
        "colorName": "コーラル",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10047.jpg>",
        "price": 4180,
        "currency": "JPY",
        "relevanceScore": 0.92
      },
      {
        "productId": "p-10048",
        "name": "モイスチャー リッチ リップスティック",
        "brand": "SUQQU",
        "color": "#FF7F50",
        "colorName": "05 蜜柑橙",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10048.jpg>",
        "price": 5500,
        "currency": "JPY",
        "relevanceScore": 0.88
      }
    ]
  }
}

```

### 5.2 会話履歴取得

- **エンドポイント**: `GET /api/v1/advisor/conversations`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "conversations": [
      {
        "conversationId": "conv-12345",
        "title": "春のリップカラー相談",
        "lastMessage": "春のお出かけに似合うリップカラーを教えて",
        "lastResponsePreview": "春のお出かけには、明るく華やかな印象を与えるコーラルピンクやピーチカラーのリップがおすすめです...",
        "createdAt": "2024-02-26T10:15:30Z",
        "updatedAt": "2024-02-26T10:15:45Z",
        "messageCount": 3
      },
      {
        "conversationId": "conv-12344",
        "title": "肌質と適切なスキンケア",
        "lastMessage": "乾燥肌の対策について教えてください",
        "lastResponsePreview": "乾燥肌の方は、バリア機能を強化する成分を含む製品を選ぶことが重要です...",
        "createdAt": "2024-02-24T15:30:20Z",
        "updatedAt": "2024-02-24T15:45:10Z",
        "messageCount": 8
      }
    ],
    "pagination": {
      "total": 5,
      "page": 1,
      "perPage": 10,
      "hasMore": false
    }
  }
}

```

### 5.3 会話詳細取得

- **エンドポイント**: `GET /api/v1/advisor/conversations/{conversationId}`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "conversationId": "conv-12345",
    "title": "春のリップカラー相談",
    "createdAt": "2024-02-26T10:15:30Z",
    "messages": [
      {
        "messageId": "msg-98763",
        "role": "user",
        "content": "春にぴったりのメイクを教えてください",
        "timestamp": "2024-02-26T10:15:30Z"
      },
      {
        "messageId": "msg-98764",
        "role": "assistant",
        "content": "春のメイクは、柔らかく明るい色調がおすすめです。特に桜色やペールピンク、ライトコーラルなどの色は春の雰囲気にぴったりです。\\n\\n春メイクのポイント：\\n1. ベースメイクは軽やかに\\n2. チークはほんのり桜色\\n3. アイシャドウは淡いピンクやライラック\\n4. リップは明るめのコーラルやピーチ\\n\\n具体的なリップカラーについてもっと詳しく知りたい場合は教えてください。",
        "timestamp": "2024-02-26T10:15:40Z",
        "productRecommendations": []
      },
      {
        "messageId": "msg-98765",
        "role": "user",
        "content": "春のお出かけに似合うリップカラーを教えて",
        "timestamp": "2024-02-26T10:15:45Z"
      },
      {
        "messageId": "msg-98766",
        "role": "assistant",
        "content": "春のお出かけには、明るく華やかな印象を与えるコーラルピンクやピーチカラーのリップがおすすめです。あなたのミディアムトーンの肌とウォームアンダートーンには、オレンジがかったコーラルカラーが特に美しく映えるでしょう。\\n\\n以下のような製品がおすすめです：\\n\\n1. シャネル ルージュ ココ フラッシュ「54 ボワイヤント」\\n2. ディオール アディクト リップ グロウ「コーラル」\\n3. SUQQU モイスチャー リッチ リップスティック「05 蜜柑橙」",
        "timestamp": "2024-02-26T10:15:55Z",
        "productRecommendations": [
          {
            "productId":
```

```json
        "timestamp": "2024-02-26T10:15:55Z",
        "productRecommendations": [
          {
            "productId": "p-10046",
            "name": "ルージュ ココ フラッシュ",
            "brand": "CHANEL",
            "color": "#FF6A5E",
            "colorName": "54 ボワイヤント",
            "imageUrl": "<https://storage.beautygenius.com/products/p-10046.jpg>",
            "price": 4620,
            "currency": "JPY"
          },
          {
            "productId": "p-10047",
            "name": "アディクト リップ グロウ",
            "brand": "Dior",
            "color": "#FF7D6D",
            "colorName": "コーラル",
            "imageUrl": "<https://storage.beautygenius.com/products/p-10047.jpg>",
            "price": 4180,
            "currency": "JPY"
          },
          {
            "productId": "p-10048",
            "name": "モイスチャー リッチ リップスティック",
            "brand": "SUQQU",
            "color": "#FF7F50",
            "colorName": "05 蜜柑橙",
            "imageUrl": "<https://storage.beautygenius.com/products/p-10048.jpg>",
            "price": 5500,
            "currency": "JPY"
          }
        ]
      }
    ]
  }
}

```

### 5.4 音声入力処理

- **エンドポイント**: `POST /api/v1/advisor/voice`
- **リクエスト**: マルチパートフォームデータ（音声ファイル）
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "conversationId": "conv-12345",
    "messageId": "msg-98767",
    "transcribedText": "オフィスで使える自然なアイメイクを教えてください",
    "response": "オフィスでは控えめながらも洗練された印象を与えるアイメイクがおすすめです。以下のようなポイントに注意すると良いでしょう：\\n\\n1. ベースカラーには、ベージュやライトブラウンなどのニュートラルカラーを使用\\n2. 締め色には、ダークブラウンやグレーなど明るすぎない色を選ぶ\\n3. パール感やラメは控えめに\\n4. アイラインは細めに引き、ブラウン系を選ぶとソフトな印象に\\n\\n具体的な製品としては以下のようなアイテムがおすすめです：",
    "audioResponseUrl": "<https://storage.beautygenius.com/voice-responses/msg-98767.mp3>",
    "productRecommendations": [
      {
        "productId": "p-10050",
        "name": "アイカラー クワッド",
        "brand": "LUNASOL",
        "colorName": "01 Neutral Eyes",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10050.jpg>",
        "price": 7700,
        "currency": "JPY"
      }
    ]
  }
}

```

### 5.5 製品推奨

- **エンドポイント**: `GET /api/v1/advisor/recommend`
- **クエリパラメータ**: `type=lipstick&skinTone=medium&undertone=warm&occasion=office&style=natural`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "recommendations": [
      {
        "productId": "p-10052",
        "name": "ザ リップスティック",
        "brand": "SHISEIDO",
        "category": "lipstick",
        "subCategory": "cream",
        "color": "#CD5C5C",
        "colorName": "RD715 Rose Crush",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10052.jpg>",
        "price": 3850,
        "currency": "JPY",
        "description": "滑らかでクリーミーなテクスチャーのリップスティック。保湿成分配合で唇を乾燥から守ります。",
        "matchScore": 0.95,
        "matchReason": "オフィス環境に適した控えめながら洗練された色調で、あなたのミディアムトーンの肌に調和します。",
        "popularityRank": 3
      },
      {
        "productId": "p-10053",
        "name": "リップカラー",
        "brand": "TOM FORD",
        "category": "lipstick",
        "subCategory": "cream",
        "color": "#B76E79",
        "colorName": "Indian Rose",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10053.jpg>",
        "price": 7150,
        "currency": "JPY",
        "description": "豊富な保湿成分を含み、滑らかな発色でありながら長時間持続するリップスティック。",
        "matchScore": 0.92,
        "matchReason": "自然な血色感を演出するローズピンクは、オフィスでの使用に最適です。",
        "popularityRank": 8
      },
      {
        "productId": "p-10054",
        "name": "ピュア カラー エンヴィ リップスティック",
        "brand": "ESTÉE LAUDER",
        "category": "lipstick",
        "subCategory": "cream",
        "color": "#C27273",
        "colorName": "Discreet",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10054.jpg>",
        "price": 4400,
        "currency": "JPY",
        "description": "鮮やかな発色と保湿感を同時に実現する、クリーミーなテクスチャーのリップスティック。",
        "matchScore": 0.88,
        "matchReason": "控えめなピンクベージュカラーで、オフィスでの長時間使用にも適しています。",
        "popularityRank": 12
      }
    ]
  }
}

```

## 6. メイクルックAPI

### 6.1 トレンドルック取得

- **エンドポイント**: `GET /api/v1/looks/trending`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "trends": [
      {
        "id": "trend-001",
        "title": "2025春夏トレンドメイク：クリアスキン＆カラフルアクセント",
        "description": "2025年春夏は、透明感のある肌に鮮やかなカラーアクセントを効かせたメイクがトレンド。特にラベンダーやミントグリーンのようなパステルカラーがアイシャドウやライナーとして人気です。",
        "imageUrl": "<https://storage.beautygenius.com/trends/trend-001.jpg>",
        "trendingScore": 98,
        "createdAt": "2025-01-15T00:00:00Z",
        "updatedAt": "2025-02-20T00:00:00Z"
      },
      {
        "id": "trend-002",
        "title": "モノトーンメイクの進化：立体感と陰影の表現",
        "description": "単色使いでも立体感を出すモノトーンメイクが注目を集めています。ハイライトとシェーディングを効果的に使い、同系色でも陰影をつけるテクニックが人気です。",
        "imageUrl": "<https://storage.beautygenius.com/trends/trend-002.jpg>",
        "trendingScore": 92,
        "createdAt": "2025-01-20T00:00:00Z",
        "updatedAt": "2025-02-15T00:00:00Z"
      }
    ],
    "featuredLooks": [
      {
        "lookId": "look-12001",
        "title": "ラベンダーアクセントアイ",
        "imageUrl": "<https://storage.beautygenius.com/featured-looks/look-12001.jpg>",
        "creator": {
          "userId": "u-98765",
          "name": "美容家 田中さくら",
          "verified": true,
          "avatarUrl": "<https://storage.beautygenius.com/profiles/u-98765.jpg>"
        },
        "likes": 3450,
        "tags": ["春", "トレンド", "ラベンダー", "パステル"],
        "trendId": "trend-001"
      },
      {
        "lookId": "look-12002",
        "title": "グレージュモノトーン",
        "imageUrl": "<https://storage.beautygenius.com/featured-looks/look-12002.jpg>",
        "creator": {
          "userId": "u-87654",
          "name": "メイクアップアーティスト 鈴木ユリ",
          "verified": true,
          "avatarUrl": "<https://storage.beautygenius.com/profiles/u-87654.jpg>"
        },
        "likes": 2980,
        "tags": ["オフィス", "モノトーン", "グレージュ", "大人"],
        "trendId": "trend-002"
      }
    ]
  }
}

```

### 6.2 パーソナライズルック取得

- **エンドポイント**: `GET /api/v1/looks/personalized`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "personalizedLooks": [
      {
        "lookId": "look-12005",
        "title": "ウォームトーン向けコーラルメイク",
        "imageUrl": "<https://storage.beautygenius.com/looks/look-12005.jpg>",
        "description": "あなたのウォームトーンの肌色に合わせた、コーラルカラーを基調としたデイリーメイク",
        "matchScore": 0.95,
        "matchReason": "あなたの「ウォームトーン」の肌と「ナチュラル」「エレガント」好みに合わせたコーディネート",
        "creator": {
          "userId": "u-87654",
          "name": "メイクアップアーティスト 鈴木ユリ",
          "verified": true
        },
        "products": [
          {
            "productId": "p-10060",
            "name": "シークレットスキン メイカー",
            "brand": "DECORTÉ",
            "type": "foundation",
            "color": "#E8C19D"
          },
          {
            "productId": "p-10061",
            "name": "チーク カラー",
            "brand": "SUQQU",
            "type": "blush",
            "color": "#FF7F50"
          }
        ]
      },
      {
        "lookId": "look-12006",
        "title": "春のオフィスナチュラルメイク",
        "imageUrl": "<https://storage.beautygenius.com/looks/look-12006.jpg>",
        "description": "春らしい明るさのあるベージュトーンの洗練されたオフィスメイク",
        "matchScore": 0.92,
        "matchReason": "あなたの好みの「ナチュラル」スタイルと「オフィス」シーンに適したメイク",
        "creator": {
          "userId": "u-76543",
          "name": "BeautyGenius AI",
          "verified": true
        },
        "products": [
          {
            "productId": "p-10065",
            "name": "ディオールスキン フォーエヴァー フルイド グロウ",
            "brand": "Dior",
            "type": "foundation",
            "color": "#E5C2A3"
          },
          {
            "productId": "p-10066",
            "name": "シフォニエ アイシャドウ",
            "brand": "ADDICTION",
            "type": "eyeshadow",
            "color": "#C9A587"
          }
        ]
      }
    ]
  }
}

```

### 6.3 メイクルック検索

- **エンドポイント**: `GET /api/v1/looks/search`
- **クエリパラメータ**: `query=春 ピンク&skinTone=light&undertone=cool&tags=office,natural`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "results": [
      {
        "lookId": "look-12010",
        "title": "春のライトピンクオフィスメイク",
        "imageUrl": "<https://storage.beautygenius.com/looks/look-12010.jpg>",
        "description": "明るいピンクを使ったナチュラルなオフィスメイク",
        "relevanceScore": 0.98,
        "tags": ["春", "ピンク", "オフィス", "ナチュラル"],
        "creator": {
          "userId": "u-87654",
          "name": "メイクアップアーティスト 鈴木ユリ",
          "verified": true
        },
        "createdAt": "2024-02-01T10:30:00Z",
        "likes": 1250
      },
      {
        "lookId": "look-12011",
        "title": "クールトーン向け春の桜メイク",
        "imageUrl": "<https://storage.beautygenius.com/looks/look-12011.jpg>",
        "description": "クールトーンの肌に似合う桜色を基調としたナチュラルメイク",
        "relevanceScore": 0.92,
        "tags": ["春", "桜", "ピンク", "クールトーン", "ナチュラル"],
        "creator": {
          "userId": "u-65432",
          "name": "ビューティブロガー 山口えみ",
          "verified": false
        },
        "createdAt": "2024-02-15T14:20:00Z",
        "likes": 980
      }
    ],
    "pagination": {
      "total": 24,
      "page": 1,
      "perPage": 10,
      "hasMore": true
    },
    "relatedTags": [
      {"tag": "デート", "count": 15},
      {"tag": "チーク", "count": 12},
      {"tag": "桜", "count": 10}
    ]
  }
}

```

### 6.4 メイクルック詳細取得

- **エンドポイント**: `GET /api/v1/looks/{lookId}`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "lookId": "look-12010",
    "title": "春のライトピンクオフィスメイク",
    "description": "明るいピンクを使ったナチュラルなオフィスメイク。ほんのり血色感を出しながらも、オフィスでも浮かないように落ち着いたトーンに調整しています。",
    "imageUrl": "<https://storage.beautygenius.com/looks/look-12010.jpg>",
    "images": [
      {
        "url": "<https://storage.beautygenius.com/looks/look-12010.jpg>",
        "type": "main"
      },
      {
        "url": "<https://storage.beautygenius.com/looks/look-12010-detail-1.jpg>",
        "type": "detail",
        "caption": "アイメイクアップ"
      },
      {
        "url": "<https://storage.beautygenius.com/looks/look-12010-detail-2.jpg>",
        "type": "detail",
        "caption": "リップメイクアップ"
      }
    ],
    "tags": ["春", "ピンク", "オフィス", "ナチュラル"],
    "creator": {
      "userId": "u-87654",
      "name": "メイクアップアーティスト 鈴木ユリ",
      "bio": "20年以上の経験を持つプロメイクアップアーティスト。ナチュラルメイクが得意。",
      "verified": true,
      "avatarUrl": "<https://storage.beautygenius.com/profiles/u-87654.jpg>",
      "followerCount": 15800
    },
    "createdAt": "2024-02-01T10:30:00Z",
    "updatedAt": "2024-02-05T15:20:00Z",
    "stats": {
      "views": 28500,
      "likes": 1250,
      "shares": 420,
      "saves": 850,
      "comments": 65
    },
    "suitableFor": {
      "skinTones": ["light", "medium-light"],
      "undertones": ["cool", "neutral"],
      "occasions": ["office", "daily", "lunch"]
    },
    "products": [
      {
        "productId": "p-10070",
        "name": "スキン イルミネイター",
        "brand": "Laura Mercier",
        "type": "highlighter",
        "color": "#F9E8D2",
        "colorName": "Devotion",
        "price": 5280,
        "currency": "JPY",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10070.jpg>",
        "purchaseUrl": "<https://beautygenius.com/redirect/product/p-10070>",
        "usageDescription": "Tゾーンとハイライトポイントに軽く塗布"
      },
      {
        "productId": "p-10071",
        "name": "チーク カラー",
        "brand": "SUQQU",
        "type": "blush",
        "color": "#F5A9A9",
        "colorName": "01 桜色",
        "price": 5500,
        "currency": "JPY",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10071.jpg>",
        "purchaseUrl": "<https://beautygenius.com/redirect/product/p-10071>",
        "usageDescription": "頬の高い位置から外側に向かってふんわりと"
      }
    ],
    "tutorial": {
      "steps": [
        {
          "order": 1,
          "title": "ベースメイク",
          "description": "クリアなツヤ肌に仕上げるため、保湿下地を使用した後、リキッドファンデーションを薄く伸ばします。",
          "imageUrl": "<https://storage.beautygenius.com/tutorials/look-12010/step1.jpg>"
        },
        {
          "order": 2,
          "title": "アイシャドウ",
          "description": "ベージュピンクをアイホール全体に薄くのせ、二重幅に少し濃いピンクをのせます。",
          "imageUrl": "<https://storage.beautygenius.com/tutorials/look-12010/step2.jpg>"
        }
      ]
    },
    "userReactions": {
      "liked": false,
      "saved": true,
      "reported": false
    },
    "comments": [
      {
        "commentId": "comment-5001",
        "userId": "u-11111",
        "username": "美容好きOL",
        "content": "実際に試してみましたが、オフィスでも浮かず上品な印象になりました！",
        "createdAt": "2024-02-02T08:15:30Z",
        "likes": 25
      }
    ]
  }
}

```

## 7. コミュニティAPI

### 7.1 投稿一覧取得

- **エンドポイント**: `GET /api/v1/community/posts`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "posts": [
      {
        "postId": "post-30001",
        "type": "look",
        "title": "今日のメイク：春の訪れを感じるピンクメイク",
        "content": "今日は桜をイメージしたピンクメイクに挑戦してみました。アイシャドウとチークを同系色で揃えると統一感が出ますね。",
        "imageUrls": [
          "<https://storage.beautygenius.com/community/post-30001-1.jpg>",
          "<https://storage.beautygenius.com/community/post-30001-2.jpg>"
        ],
        "author": {
          "userId": "u-22222",
          "username": "メイク初心者みゆき",
          "avatarUrl": "<https://storage.beautygenius.com/profiles/u-22222.jpg>"
        },
        "createdAt": "2024-02-25T09:45:00Z",
        "stats": {
          "likes": 45,
          "comments": 12,
          "shares": 5
        },
        "tags": ["春メイク", "ピンク", "初心者"]
      },
      {
        "postId": "post-30002",
        "type": "question",
        "title": "乾燥肌におすすめのファンデーションは？",
        "content": "最近とても乾燥していてファンデーションがよれてしまいます。乾燥肌の方がうまくいっているファンデーションがあれば教えてください！",
        "author": {
          "userId": "u-33333",
          "username": "乾燥に悩むアラサー",
          "avatarUrl": "<https://storage.beautygenius.com/profiles/u-33333.jpg>"
        },
        "createdAt": "2024-02-24T18:30:00Z",
        "stats": {
          "likes": 28,
          "comments": 34,
          "shares": 2
        },
        "tags": ["乾燥肌", "ファンデーション", "悩み相談"]
      }
    ],
    "pagination": {
      "total": 254,
      "page": 1,
      "perPage": 10,
      "hasMore": true
    }
  }
}

```

### 7.2 投稿詳細取得

- **エンドポイント**: `GET /api/v1/community/posts/{postId}`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "postId": "post-30001",
    "type": "look",
    "title": "今日のメイク：春の訪れを感じるピンクメイク",
    "content": "今日は桜をイメージしたピンクメイクに挑戦してみました。アイシャドウとチークを同系色で揃えると統一感が出ますね。\\n\\n使用したアイテム：\\n- SUQQU シグニチャー カラー アイズ 101\\n- ADDICTION ザ ブラッシュ 008 Sweet Heart\\n- Dior アディクト リップ グロウ ピンク",
    "imageUrls": [
      "<https://storage.beautygenius.com/community/post-30001-1.jpg>",
      "<https://storage.beautygenius.com/community/post-30001-2.jpg>"
    ],
    "author": {
      "userId": "u-22222",
      "username": "メイク初心者みゆき",
      "avatarUrl": "<https://storage.beautygenius.com/profiles/u-22222.jpg>",
      "bio": "メイク勉強中の26歳OLです。普段はナチュラルメイクが多いですが、休日はいろいろ挑戦中！",
      "followerCount": 125,
      "followingCount": 210
    },
    "createdAt": "2024-02-25T09:45:00Z",
    "updatedAt": null,
    "stats": {
      "likes": 45,
      "comments": 12,
      "shares": 5,
      "saves": 18
    },
    "tags": ["春メイク", "ピンク", "初心者"],
    "products": [
      {
        "productId": "p-10080",
        "name": "シグニチャー カラー アイズ",
        "brand": "SUQQU",
        "type": "eyeshadow",
        "colorName": "101",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10080.jpg>"
      },
      {
        "productId": "p-10081",
        "name": "ザ ブラッシュ",
        "brand": "ADDICTION",
        "type": "blush",
        "colorName": "008 Sweet Heart",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10081.jpg>"
      }
    ],
    "userReactions": {
      "liked": true,
      "saved": false,
      "followed": false
    },
    "comments": [
      {
        "commentId": "comment-6001",
        "content": "とても春らしくて素敵です！同じ商品持っているので参考にさせていただきます！",
        "author": {
          "userId": "u-44444",
          "username": "メイク好きなみほ",
          "avatarUrl": "<https://storage.beautygenius.com/profiles/u-44444.jpg>"
        },
        "createdAt": "2024-02-25T10:15:30Z",
        "likes": 8,
        "userLiked": false
      },
      {
        "commentId": "comment-6002",
        "content": "色の組み合わせが絶妙ですね！チークの入れ方も知りたいです。",
        "author": {
          "userId": "u-55555",
          "username": "コスメヲタク",
          "avatarUrl": "<https://storage.beautygenius.com/profiles/u-55555.jpg>"
        },
        "createdAt": "2024-02-25T11:20:45Z",
        "likes": 5,
        "userLiked": true
      }
    ]
  }
}

```

### 7.3 投稿作成

- **エンドポイント**: `POST /api/v1/community/posts`
- **リクエスト**:

```json
{
  "type": "look",
  "title": "今日のメイク：オフィスカジュアルブラウンメイク",
  "content": "今日は落ち着いたブラウンメイクにしてみました。アイシャドウはマットなブラウンをグラデーションにして、リップは少し明るめのベージュピンクで抜け感を出しています。",
  "tags": ["オフィスメイク", "ブラウン", "デイリーメイク"],
  "products": ["p-10090", "p-10091", "p-10092"],
  "images": [
    {
      "data": "base64エンコードされた画像データ",
      "caption": "全体イメージ"
    },
    {
      "data": "base64エンコードされた画像データ",
      "caption": "アイメイクアップ"
    }
  ]
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "message": "投稿が作成されました",
  "data": {
    "postId": "post-30003",
    "createdAt": "2024-02-26T15:30:45Z",
    "imageUrls": [
      "<https://storage.beautygenius.com/community/post-30003-1.jpg>",
      "<https://storage.beautygenius.com/community/post-30003-2.jpg>"
    ]
  }
}

```

### 7.4 いいね管理

- **エンドポイント**: `POST /api/v1/community/likes`
- **リクエスト**:

```json
{
  "targetType": "post",
  "targetId": "post-30001",
  "action": "like"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "targetId": "post-30001",
    "liked": true,
    "likeCount": 46
  }
}

```

### 7.5 コメント作成

- **エンドポイント**: `POST /api/v1/community/comments`
- **リクエスト**:

```json
{
  "targetType": "post",
  "targetId": "post-30001",
  "content": "素敵なメイクですね！リップの塗り方のコツを教えていただけますか？"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "commentId": "comment-6003",
    "content": "素敵なメイクですね！リップの塗り方のコツを教えていただけますか？",
```

```json
    "commentId": "comment-6003",
    "content": "素敵なメイクですね！リップの塗り方のコツを教えていただけますか？",
    "author": {
      "userId": "u-12345abcde",
      "username": "あなたのユーザー名",
      "avatarUrl": "<https://storage.beautygenius.com/profiles/u-12345abcde.jpg>"
    },
    "createdAt": "2024-02-26T15:40:20Z",
    "targetId": "post-30001"
  }
}

```

## 8. 製品情報API

### 8.1 製品カタログ取得

- **エンドポイント**: `GET /api/v1/products/catalog`
- **クエリパラメータ**: `category=lipstick&brand=CHANEL,Dior&priceRange=3000-5000&sortBy=popularity`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "products": [
      {
        "productId": "p-10100",
        "name": "ルージュ ココ",
        "brand": "CHANEL",
        "category": "lipstick",
        "subCategory": "cream",
        "price": 4620,
        "currency": "JPY",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10100.jpg>",
        "colors": [
          {
            "id": "p-10100-01",
            "name": "440 アーサー",
            "colorHex": "#B12D47",
            "imageUrl": "<https://storage.beautygenius.com/products/colors/p-10100-01.jpg>"
          },
          {
            "id": "p-10100-02",
            "name": "432 セシル",
            "colorHex": "#C25B69",
            "imageUrl": "<https://storage.beautygenius.com/products/colors/p-10100-02.jpg>"
          }
        ],
        "rating": 4.7,
        "reviewCount": 1250,
        "popularityRank": 3
      },
      {
        "productId": "p-10101",
        "name": "ルージュ ディオール",
        "brand": "Dior",
        "category": "lipstick",
        "subCategory": "cream",
        "price": 4950,
        "currency": "JPY",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10101.jpg>",
        "colors": [
          {
            "id": "p-10101-01",
            "name": "999 ルージュ ディオール",
            "colorHex": "#A61A34",
            "imageUrl": "<https://storage.beautygenius.com/products/colors/p-10101-01.jpg>"
          },
          {
            "id": "p-10101-02",
            "name": "720 イコン",
            "colorHex": "#BB3E55",
            "imageUrl": "<https://storage.beautygenius.com/products/colors/p-10101-02.jpg>"
          }
        ],
        "rating": 4.5,
        "reviewCount": 980,
        "popularityRank": 5
      }
    ],
    "pagination": {
      "total": 28,
      "page": 1,
      "perPage": 10,
      "hasMore": true
    },
    "filters": {
      "categories": [
        {"id": "lipstick", "name": "リップスティック", "count": 150},
        {"id": "lipgloss", "name": "リップグロス", "count": 85}
      ],
      "brands": [
        {"id": "CHANEL", "name": "CHANEL", "count": 25},
        {"id": "Dior", "name": "Dior", "count": 22},
        {"id": "YSL", "name": "SAINT LAURENT", "count": 18}
      ],
      "priceRanges": [
        {"range": "0-3000", "label": "3,000円未満", "count": 45},
        {"range": "3000-5000", "label": "3,000円〜5,000円", "count": 78},
        {"range": "5000-8000", "label": "5,000円〜8,000円", "count": 42},
        {"range": "8000-", "label": "8,000円以上", "count": 15}
      ]
    }
  }
}

```

### 8.2 製品詳細取得

- **エンドポイント**: `GET /api/v1/products/{productId}`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "productId": "p-10100",
    "name": "ルージュ ココ",
    "brand": "CHANEL",
    "category": "lipstick",
    "subCategory": "cream",
    "description": "一塗りで鮮やかな発色と輝くような仕上がりのリップスティック。保湿成分を配合し、唇にうるおいを与えながら、心地よいつけ心地と美しい色持ちを実現します。",
    "price": 4620,
    "currency": "JPY",
    "imageUrls": [
      "<https://storage.beautygenius.com/products/p-10100.jpg>",
      "<https://storage.beautygenius.com/products/p-10100-2.jpg>",
      "<https://storage.beautygenius.com/products/p-10100-3.jpg>"
    ],
    "colors": [
      {
        "id": "p-10100-01",
        "name": "440 アーサー",
        "colorHex": "#B12D47",
        "imageUrl": "<https://storage.beautygenius.com/products/colors/p-10100-01.jpg>",
        "availability": "in_stock"
      },
      {
        "id": "p-10100-02",
        "name": "432 セシル",
        "colorHex": "#C25B69",
        "imageUrl": "<https://storage.beautygenius.com/products/colors/p-10100-02.jpg>",
        "availability": "in_stock"
      },
      {
        "id": "p-10100-03",
        "name": "434 ジュリア",
        "colorHex": "#D96B78",
        "imageUrl": "<https://storage.beautygenius.com/products/colors/p-10100-03.jpg>",
        "availability": "out_of_stock"
      }
    ],
    "features": [
      "一塗りで鮮やかな発色",
      "保湿成分配合",
      "軽やかなつけ心地",
      "長時間の美しい色持ち"
    ],
    "ingredients": "酸化チタン、ポリブテン、ジイソステアリル リンゴ酸、トリエチルヘキサノイン、...(以下省略)",
    "howToUse": "リップブラシまたは直接唇に塗布します。より繊細な仕上がりにするには、指先でポンポンとなじませるようにします。",
    "specifications": {
      "weight": "3.5g",
      "dimensions": "2.5cm x 2.5cm x 7.5cm",
      "countryOfOrigin": "フランス",
      "manufactureDate": "製造年月日はパッケージに記載"
    },
    "rating": {
      "average": 4.7,
      "totalReviews": 1250,
      "distribution": {
        "5": 850,
        "4": 280,
        "3": 80,
        "2": 25,
        "1": 15
      }
    },
    "suitableFor": {
      "skinTones": ["all"],
      "skinTypes": ["all"],
      "occasions": ["daily", "office", "evening", "special"]
    },
    "relatedProducts": [
      {
        "productId": "p-10105",
        "name": "ルージュ ココ ブルーム",
        "brand": "CHANEL",
        "imageUrl": "<https://storage.beautygenius.com/products/p-10105.jpg>",
        "price": 4620,
        "currency": "JPY",
        "rating": 4.6
      }
    ],
    "purchaseUrls": {
      "official": "<https://www.chanel.com/jp/>",
      "authorized": [
        {
          "name": "三越伊勢丹オンラインストア",
          "url": "<https://beautygenius.com/redirect/retailer/isetan/p-10100>"
        },
        {
          "name": "高島屋オンラインストア",
          "url": "<https://beautygenius.com/redirect/retailer/takashimaya/p-10100>"
        }
      ]
    }
  }
}

```

### 8.3 製品レビュー取得

- **エンドポイント**: `GET /api/v1/products/{productId}/reviews`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "productId": "p-10100",
    "productName": "ルージュ ココ",
    "brand": "CHANEL",
    "rating": {
      "average": 4.7,
      "totalReviews": 1250
    },
    "reviews": [
      {
        "reviewId": "review-50001",
        "title": "長時間美しい発色が続く",
        "content": "以前から愛用しているリップスティックです。発色がとても良く、保湿力も高いので唇が荒れることもありません。特に「432 セシル」はオフィスでも使いやすい落ち着いたピンクで気に入っています。",
        "rating": 5,
        "colorId": "p-10100-02",
        "colorName": "432 セシル",
        "author": {
          "userId": "u-66666",
          "username": "コスメマニア",
          "avatarUrl": "<https://storage.beautygenius.com/profiles/u-66666.jpg>",
          "reviewCount": 84,
          "verified": true
        },
        "createdAt": "2024-01-15T12:30:45Z",
        "helpfulCount": 45,
        "photos": [
          "<https://storage.beautygenius.com/reviews/review-50001-1.jpg>"
        ],
        "pros": ["発色が良い", "保湿力が高い", "持ちが良い"],
        "cons": ["価格が高い"],
        "userReaction": {
          "foundHelpful": true
        }
      },
      {
        "reviewId": "review-50002",
        "title": "色持ちは良いが少し乾燥する",
        "content": "発色と色持ちはとても良いのですが、乾燥肌の私にはやや唇が乾燥してしまいます。下地のリップクリームをしっかり塗ると問題なく使えます。それでも色の美しさは格別なので愛用しています。",
        "rating": 4,
        "colorId": "p-10100-01",
        "colorName": "440 アーサー",
        "author": {
          "userId": "u-77777",
          "username": "美容ブロガー早紀",
          "avatarUrl": "<https://storage.beautygenius.com/profiles/u-77777.jpg>",
          "reviewCount": 126,
          "verified": true
        },
        "createdAt": "2024-01-20T09:15:30Z",
        "helpfulCount": 32,
        "photos": [],
        "pros": ["発色が良い", "色持ちが良い", "色が美しい"],
        "cons": ["乾燥しやすい", "価格が高い"],
        "userReaction": {
          "foundHelpful": false
        }
      }
    ],
    "pagination": {
      "total": 1250,
      "page": 1,
      "perPage": 10,
      "hasMore": true
    },
    "filters": {
      "ratings": [
        {"value": 5, "count": 850},
        {"value": 4, "count": 280},
        {"value": 3, "count": 80},
        {"value": 2, "count": 25},
        {"value": 1, "count": 15}
      ],
      "colors": [
        {"id": "p-10100-01", "name": "440 アーサー", "count": 423},
        {"id": "p-10100-02", "name": "432 セシル", "count": 375},
        {"id": "p-10100-03", "name": "434 ジュリア", "count": 295}
      ],
      "skinTypes": [
        {"type": "normal", "count": 450},
        {"type": "dry", "count": 325},
        {"type": "oily", "count": 220},
        {"type": "combination", "count": 255}
      ]
    }
  }
}

```

### 8.4 製品レビュー投稿

- **エンドポイント**: `POST /api/v1/products/{productId}/reviews`
- **リクエスト**:

```json
{
  "title": "美しい発色と使い心地",
  "content": "久しぶりにシャネルのリップスティックを購入しましたが、やはり発色と質感が素晴らしいです。特に唇の縦ジワが目立ちにくくなり、一日中きれいな状態が続きました。",
  "rating": 5,
  "colorId": "p-10100-02",
  "pros": ["発色が良い", "持ちが良い", "縦ジワが目立たない"],
  "cons": ["価格が高い"],
  "skinType": "combination",
  "photos": [
    {
      "data": "base64エンコードされた画像データ"
    }
  ],
  "recommendationLevel": "highly_recommend"
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "message": "レビューが投稿されました",
  "data": {
    "reviewId": "review-50003",
    "createdAt": "2024-02-26T16:30:45Z"
  }
}

```

## 9. 通知API

### 9.1 通知一覧取得

- **エンドポイント**: `GET /api/v1/notifications`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "notifications": [
      {
        "notificationId": "notif-10001",
        "type": "like",
        "title": "投稿へのいいね",
        "message": "メイク好きなみほ さんがあなたの投稿「春のピンクメイク」にいいねしました",
        "createdAt": "2024-02-26T14:30:45Z",
        "read": false,
        "data": {
          "actorId": "u-44444",
          "actorName": "メイク好きなみほ",
          "actorAvatarUrl": "<https://storage.beautygenius.com/profiles/u-44444.jpg>",
          "targetType": "post",
          "targetId": "post-30001",
          "targetTitle": "春のピンクメイク"
        }
      },
      {
        "notificationId": "notif-10002",
        "type": "comment",
        "title": "投稿へのコメント",
        "message": "コスメヲタク さんがあなたの投稿「春のピンクメイク」にコメントしました：「色の組み合わせが絶妙ですね！」",
        "createdAt": "2024-02-25T11:20:45Z",
        "read": true,
        "data": {
          "actorId": "u-55555",
          "actorName": "コスメヲタク",
          "actorAvatarUrl": "<https://storage.beautygenius.com/profiles/u-55555.jpg>",
          "targetType": "post",
          "targetId": "post-30001",
          "targetTitle": "春のピンクメイク",
          "commentId": "comment-6002",
          "commentText": "色の組み合わせが絶妙ですね！チークの入れ方も知りたいです。"
        }
      },
      {
        "notificationId": "notif-10003",
        "type": "ai_insight",
        "title": "あなたにぴったりの春メイクのご提案",
        "message": "BeautyGenius AIが、あなたの肌質と好みに合わせた春のメイクアップを提案しました",
        "createdAt": "2024-02-24T09:00:00Z",
        "read": true,
        "data": {
          "insightType": "seasonal_recommendation",
          "lookId": "look-12006",
          "lookTitle": "春のオフィスナチュラルメイク",
          "lookImageUrl": "<https://storage.beautygenius.com/looks/look-12006.jpg>"
        }
      }
    ],
    "pagination": {
      "total": 28,
      "page": 1,
      "perPage": 10,
      "hasMore": true
    },
    "unreadCount": 5
  }
}

```

### 9.2 通知既読設定

- **エンドポイント**: `PATCH /api/v1/notifications/{notificationId}`
- **リクエスト**:

```json
{
  "read": true
}

```

- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "notificationId": "notif-10001",
    "read": true,
    "updatedAt": "2024-02-26T16:45:30Z"
  }
}

```

### 9.3 全通知既読設定

- **エンドポイント**: `PATCH /api/v1/notifications/read-all`
- **レスポンス**:

```json
{
  "status": "success",
  "message": "すべての通知を既読にしました",
  "data": {
    "updatedCount": 5,
    "updatedAt": "2024-02-26T16:50:15Z"
  }
}

```

## 10. 検索API

### 10.1 統合検索

- **エンドポイント**: `GET /api/v1/search`
- **クエリパラメータ**: `query=春 ピンク メイク&type=all`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "query": "春 ピンク メイク",
    "results": {
      "looks": [
        {
          "lookId": "look-12010",
          "title": "春のライトピンクオフィスメイク",
          "imageUrl": "<https://storage.beautygenius.com/looks/look-12010.jpg>",
          "relevanceScore": 0.98,
          "tags": ["春", "ピンク", "オフィス", "ナチュラル"]
        }
      ],
      "products": [
        {
          "productId": "p-10071",
          "name": "チーク カラー",
          "brand": "SUQQU",
          "type": "blush",
          "color": "#F5A9A9",
          "colorName": "01 桜色",
          "imageUrl": "<https://storage.beautygenius.com/products/p-10071.jpg>",
          "relevanceScore": 0.85
        }
      ],
      "posts": [
        {
          "postId": "post-30001",
          "type": "look",
          "title": "今日のメイク：春の訪れを感じるピンクメイク",
          "imageUrls": ["<https://storage.beautygenius.com/community/post-30001-1.jpg>"],
          "relevanceScore": 0.92,
          "author": {
            "username": "メイク初心者みゆき"
          }
        }
      ],
      "trends": [
        {
          "id": "trend-001",
          "title": "2025春夏トレンドメイク：クリアスキン＆カラフルアクセント",
          "imageUrl": "<https://storage.beautygenius.com/trends/trend-001.jpg>",
          "relevanceScore": 0.78
        }
      ]
    },
    "topCategories": [
      {"category": "looks", "count": 24},
      {"category": "posts", "count": 18},
      {"category": "products", "count": 15},
      {"category": "trends", "count": 3}
    ],
    "suggestions": [
      "春 ピンク リップ",
      "春 ナチュラル メイク",
      "桜色 メイク"
    ]
  }
}

```

### 10.2 オートコンプリート

- **エンドポイント**: `GET /api/v1/search/autocomplete`
- **クエリパラメータ**: `query=シャネル ル`
- **レスポンス**:

```json
{
  "status": "success",
  "data": {
    "query": "シャネル ル",
    "suggestions": [
      {
        "text": "シャネル ルージュ ココ",
        "type": "product",
        "highlightRanges": [[7, 11]]
      },
      {
        "text": "シャネル ル ブラン",
        "type": "product",
        "highlightRanges": [[7, 9]]
      },
      {
        "text": "シャネル ルージュ アリュール",
        "type": "product",
        "highlightRanges": [[7, 11]]
      }
    ]
  }
}

```

## 付録: エラーレスポンス形式

エラーが発生した場合は、以下の形式でレスポンスが返されます。

### 認証エラー（401）

```json
{
  "status": "error",
  "code": "authentication_failed",
  "message": "認証に失敗しました。ログインしてください。"
}

```

### 権限エラー（403）

```json
{
  "status": "error",
  "code": "permission_denied",
  "message": "この操作を行う権限がありません。"
}

```

### リソース不存在エラー（404）

```json
{
  "status": "error",
  "code": "resource_not_found",
  "message": "指定されたリソースが見つかりません。"
}

```

### バリデーションエラー（422）

```json
{
  "status": "error",
  "code": "validation_failed",
  "message": "入力内容に誤りがあります。",
  "details": [
    {
      "field": "email",
      "message": "有効なメールアドレスを入力してください。"
    },
    {
      "field": "password",
      "message": "パスワードは8文字以上で、英数字を含める必要があります。"
    }
  ]
}

```

### サーバーエラー（500）

```json
{
  "status": "error",
  "code": "server_error",
  "message": "サーバーエラーが発生しました。しばらく経ってから再度お試しください。",
  "requestId": "req-abcdef123456"
}

```

### レート制限エラー（429）

```json
{
  "status": "error",
  "code": "rate_limit_exceeded",
  "message": "リクエスト数が制限を超えました。しばらく経ってから再度お試しください。",
  "retryAfter": 60
}

```

### サブスクリプション制限エラー（402）

```json
{
  "status": "error",
  "code": "subscription_required",
  "message": "この機能を利用するには、プレミアムプランへのアップグレードが必要です。",
  "details": {
    "requiredPlan": "premium",
    "currentPlan": "free",
    "upgradeUrl": "<https://beautygenius.com/subscription/upgrade>"
  }
}

```